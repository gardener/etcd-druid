# CLI Flags

Etcd-druid exposes the following CLI flags that allow for configuring its behavior.

| CLI FLag                                  | Component                        | Description                                                                                                                                                                                                                                                                                                     | Default                        |
|-------------------------------------------|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
| `feature-gates`                           | `etcd-druid`                     | A set of key=value pairs that describe feature gates for alpha/experimental features. Please check [feature-gates](feature-gates.md) for more information.                                                                                                                                                      | `""`                           |
| `metrics-bind-address`                    | `controller-manager`             | The IP address that the metrics endpoint binds to.                                                                                                                                                                                                                                                              | `""`                           |
| `metrics-port`                            | `controller-manager`             | The port used for the metrics endpoint.                                                                                                                                                                                                                                                                         | `8080`                         |
| `metrics-addr`                            | `controller-manager`             | The fully qualified address:port that the metrics endpoint binds to.<br />Deprecated: this field will be eventually removed. Please use `--metrics-bind-address` and --`metrics-port` instead.                                                                                                                  | `":8080"`                      |
| `webhook-server-bind-address`             | `controller-manager`             | The IP address on which to listen for the HTTPS webhook server.                                                                                                                                                                                                                                                 | `""`                           |
| `webhook-server-port`                     | `controller-manager`             | The port on which to listen for the HTTPS webhook server.                                                                                                                                                                                                                                                       | `9443`                         |
| `webhook-server-tls-server-cert-dir`      | `controller-manager`             | The path to a directory containing the server's TLS certificate and key (the files must be named tls.crt and tls.key respectively).                                                                                                                                                                             | `"/etc/webhook-server-tls"`    |
| `enable-leader-election`                  | `controller-manager`             | Enable leader election for controller manager. Enabling this will ensure there is only one active controller manager.                                                                                                                                                                                           | `false`                        |
| `leader-election-id`                      | `controller-manager`             | Name of the resource that leader election will use for holding the leader lock.                                                                                                                                                                                                                                 | `"druid-leader-election"`      |
| `leader-election-resource-lock`           | `controller-manager`             | Specifies which resource type to use for leader election. Supported options are 'endpoints', 'configmaps', 'leases', 'endpointsleases' and 'configmapsleases'.<br />Deprecated. Will be removed in the future in favour of using only `leases` as the leader election resource lock for the controller manager. | `"leases"`                     |
| `disable-lease-cache`                     | `controller-manager`             | Disable cache for lease.coordination.k8s.io resources.                                                                                                                                                                                                                                                          | `false`                        |
| `etcd-workers`                            | `etcd-controller`                | Number of workers spawned for concurrent reconciles of etcd spec and status changes. If not specified then default of 3 is assumed.                                                                                                                                                                             | `3`                            |
| `ignore-operation-annotation`             | `etcd-controller`                | Specifies whether to ignore or honour the annotation `gardener.cloud/operation: reconcile` on resources to be reconciled.<br />Deprecated: please use `--enable-etcd-spec-auto-reconcile` instead.                                                                                                              | `false`                        |
| `enable-etcd-spec-auto-reconcile`         | `etcd-controller`                | If true then automatically reconciles Etcd Spec. If false, waits for explicit annotation `gardener.cloud/operation: reconcile` to be placed on the Etcd resource to trigger reconcile.                                                                                                                          | `false`                        |
| `disable-etcd-serviceaccount-automount`   | `etcd-controller`                | If true then .automountServiceAccountToken will be set to false for the ServiceAccount created for etcd StatefulSets.                                                                                                                                                                                           | `false`                        |
| `etcd-status-sync-period`                 | `etcd-controller`                | Period after which an etcd status sync will be attempted.                                                                                                                                                                                                                                                       | `15s`                          |
| `etcd-member-notready-threshold`          | `etcd-controller`                | Threshold after which an etcd member is considered not ready if the status was unknown before.                                                                                                                                                                                                                  | `5m`                           |
| `etcd-member-unknown-threshold`           | `etcd-controller`                | Threshold after which an etcd member is considered unknown.                                                                                                                                                                                                                                                     | `1m`                           |
| `enable-backup-compaction`                | `compaction-controller`          | Enable automatic compaction of etcd backups.                                                                                                                                                                                                                                                                    | `false`                        |
| `compaction-workers`                      | `compaction-controller`          | Number of worker threads of the CompactionJob controller. The controller creates a backup compaction job if a certain etcd event threshold is reached. If compaction is enabled, the value for this flag must be greater than zero.                                                                             | `3`                            |
| `etcd-events-threshold`                   | `compaction-controller`          | Total number of etcd events that can be allowed before a backup compaction job is triggered.                                                                                                                                                                                                                    | `1000000`                      |
| `active-deadline-duration`                | `compaction-controller`          | Duration after which a running backup compaction job will be terminated.                                                                                                                                                                                                                                        | `3h`                           |
| `metrics-scrape-wait-duration`            | `compaction-controller`          | Duration to wait for after compaction job is completed, to allow Prometheus metrics to be scraped.                                                                                                                                                                                                              | `0s`                           |
| `etcd-copy-backups-task-workers`          | `etcdcopybackupstask-controller` | Number of worker threads for the etcdcopybackupstask controller.                                                                                                                                                                                                                                                | `3`                            |
| `secret-workers`                          | `secret-controller`              | Number of worker threads for the secrets controller.                                                                                                                                                                                                                                                            | `10`                           |
| `enable-etcd-components-webhook`          | `etcdcomponents-webhook`         | Enable EtcdComponents Webhook to prevent unintended changes to resources managed by etcd-druid.                                                                                                                                                                                                                 | `false`                        |
| `reconciler-service-account`              | `etcdcomponents-webhook`         | The fully qualified name of the service account used by etcd-druid for reconciling etcd resources. If unspecified, the default service account mounted for etcd-druid will be used.                                                                                                                             | `<etcd-druid-service-account>` |
| `etcd-components-exempt-service-accounts` | `etcdcomponents-webhook`         | The comma-separated list of fully qualified names of service accounts that are exempt from EtcdComponents Webhook checks.                                                                                                                                                                                       | `""`                           |
